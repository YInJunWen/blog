# 响应式 css 注意的地方

这段时间做了几个移动端项目，也算是初次完成大型的移动端项目，虽然只考虑了 mobile 端。 今天忽然想试一试项目在 ipad 上的显示效果，就发现了很多关于设置单位尺寸的问题，这里总计一下

## 关于设置根元素 font-size 的大小

在做响应式页面的时候，总是免不掉出现一些要根据页面宽度改变元素宽度的情况，这个时候我自己是不喜欢使用百分号来设置某些元素宽度的，这个时候第一个想到的就是 rem，而 rem 单位是根据根元素的 font-size 值来计算的，因此需要一个根据页面宽度设置根元素 fontSize 的方法；

最初这个方法也是学习其他老师的方法，是用 JS 设置的, 方法如下：

```js
document.getElementsByTagName("html")[0].style.fontSize =
  window.screen.width / 100;
```

今天在测试的时候，发现了关于 screen 的问题， 关于获取浏览器宽度有两个方式，

1.  window.screen.width

这个方法获取到的是设备的宽度， 比如我在 chrome 下，不管是改变浏览器窗口大小还是改变开发者工具栏的大小，这个尺寸始终是不会变化的

2.  window.innerWidth

这个方法获取到的是浏览器的可见宽度，在 PC 模式下：改变浏览器窗口大小和改变开发者工具栏大小，都会导致 window.inenrWidth 改变； 在非 PC 模式下，他得到的始终是移动端设备的宽度

按照第一种设置根元素字号的方法，会导致打开了开发者工具的时候，达不到自己想要的样式效果，因此正确写法应该是这样的

```js
document.getElementsByTagName("html")[0].style.fontSize =
  window.innerWidth / 100;
```

## 设置基础类样式

这一点是关于 less，我自己习惯性使用 less 来写项目。既然使用 less，就免不了定义一些变量，目的当然是为了开发过程中效率更高。我上传了一篇自己的常用 less 文件，以备后用。

前面更换了一种设置根元素字号的方法，就发现一些在 height、padding-top、pading-bottom 等具有纵向尺寸样式的元素上，由于设备的宽度变化，也发生了一些变化，比如我的头部的高度会随着我改变开发人员工具的拖动而改变。

如果我的头部设置了固定定位，当页面的宽度远远大于页面高度的时候，头部已经沾满甚至超过整个页面，这明显不是我想要的。我真正需要的应该只是元素的宽度随着页面可视区域的宽度改变而改变， 而高度不需要变化。

因此就不得不去掉高度的自动变化，也就是说在一些定义纵向尺寸的 css 属性上，我不能一味地使用 rem 作为单位，而是改用固定尺寸 px。

那么这个时候问题又来了， 当我把 base.less 文件中的纵向 css 属性单位都改为 px 的时候，页面上一些 icon 就疯了，因为他们的高度单位是 px，宽度却是 rem，这已经完全变形了， 因此我又在 base.less 文件中增加了分别以 px 作为单位的 width 变量， 来改变 icon 的样式。

```css
.wp(@px) {
  width: unit(@px / 37.5, px);
}
```

## banner 部分怎么办

上面的步骤完成之后，页面不管在多款的页面上，展示效果非常好，除了 banner；

因为 banner 里面的图片是一个固定的宽高比，此时他的高度是一个固定 px，宽度不管是 rem 还是 px，很明显都不符合我想要的结果，以为 banner 必须不管在什么时候，都应该与页面宽度一致，并且要保持他的宽高比。

我增加了新的基础类来解决这个问题

```css
.hr(@px) {
  height: unit(@px / 37.5, rem);
}
```
